@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom CSS Variables */
:root {
  --bg: #0f1115;
  --panel: #171923;
  --card: #1f2230;
  --text: #e6e6e9;
  --muted: #a3a3aa;
  --accent: #4fae4a;
  --success: #10b981;
  --danger: #ef4444;
  --error: #ef4444;
  --warning: #f59e0b;
  --outline: #2b2f42;
  --border: #2b2f42;
}

/* Base styles */
* { box-sizing: border-box; }
body { 
  margin: 0; 
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans;
  background: linear-gradient(180deg, #0f1115, #0b0d12); 
  color: var(--text); 
}

/* Custom components that will be enhanced with Tailwind */
@layer components {
  .card {
    @apply bg-app-card border border-app-outline rounded-xl p-3.5;
  }
  
  .card h3 {
    @apply mt-0 mb-1.5 text-xs text-app-muted;
  }
  
  .card .value {
    @apply text-xl font-bold;
  }
  
  .badge {
    @apply inline-block px-1.5 py-0.5 rounded-full text-xs border border-app-outline;
  }
  
  .badge.ok {
    @apply bg-green-500/15;
  }
  
  .badge.warn {
    @apply bg-amber-500/15;
  }
  
  .badge.danger {
    @apply bg-red-500/15;
  }
  
  .btn-primary {
    @apply bg-app-accent text-white border border-app-accent font-medium px-4 py-2 rounded-lg;
  }
  
  .btn-primary:hover {
    @apply bg-green-600;
  }
  
  .btn-primary:disabled {
    @apply bg-app-muted border-app-muted cursor-not-allowed;
  }
  
  .btn-secondary {
    @apply bg-app-panel border border-app-outline text-app-text font-medium px-4 py-2 rounded-lg;
  }
  
  .btn-secondary:hover {
    @apply bg-app-card border-app-accent;
  }
  
  .btn-secondary:disabled {
    @apply bg-app-muted border-app-muted cursor-not-allowed;
  }
  
  /* Task item layout for command buttons */
  .task-item {
    @apply flex items-start justify-between gap-3 p-3 bg-app-card border border-app-outline rounded-lg mb-2;
  }
  
  .task-item-main {
    @apply flex items-start gap-3 flex-1 min-w-0;
  }
  
  .task-content {
    @apply flex-1 min-w-0;
  }
  
  .task-actions {
    @apply flex-shrink-0;
  }
  
  .task-name {
    @apply font-medium text-app-text text-sm mb-1;
  }
  
  .task-description {
    @apply text-xs text-app-muted leading-relaxed mb-2;
  }
  
  .task-meta {
    @apply flex items-center gap-3 text-xs text-app-muted;
  }
  
  .task-status {
    @apply flex-shrink-0 w-4 text-center;
  }
  
  .task-item.completed {
    @apply border-l-4 border-l-green-500;
  }
  
  .task-item.in_progress {
    @apply border-l-4 border-l-yellow-400;
  }
  
  .task-item.pending {
    @apply border-l-4 border-l-gray-400;
  }
}

/* Remaining custom styles that are complex to convert */

/* Text Display Modal - keeping complex markdown styles */
.text-display.markdown h1{font-size:24px;margin:16px 0;color:var(--text);border-bottom:1px solid var(--outline);padding-bottom:8px;}
.text-display.markdown h2{font-size:20px;margin:14px 0;color:var(--text);border-bottom:1px solid var(--outline);padding-bottom:6px;}
.text-display.markdown h3{font-size:16px;margin:12px 0;color:var(--text);}
.text-display.markdown h4{font-size:14px;margin:10px 0;color:var(--text);}
.text-display.markdown h5{font-size:13px;margin:8px 0;color:var(--text);}
.text-display.markdown h6{font-size:12px;margin:8px 0;color:var(--muted);}
.text-display.markdown ul,.text-display.markdown ol{padding-left:24px;margin:8px 0;}
.text-display.markdown ul ul,.text-display.markdown ol ol,.text-display.markdown ul ol,.text-display.markdown ol ul{margin:4px 0;}
.text-display.markdown li{margin:4px 0;line-height:1.6;}
.text-display.markdown pre{background:var(--card);padding:12px;border-radius:6px;overflow-x:auto;margin:12px 0;}
.text-display.markdown code{background:var(--card);padding:2px 4px;border-radius:3px;font-size:0.9em;}
.text-display.markdown pre code{background:transparent;padding:0;}
.text-display.markdown table{width:100%;border-collapse:collapse;margin:16px 0;background:var(--card);border:1px solid var(--outline);border-radius:8px;overflow:hidden;}
.text-display.markdown table thead{background:var(--panel);}
.text-display.markdown table th{padding:8px 12px;text-align:left;border-bottom:2px solid var(--outline);font-weight:600;color:var(--text);}
.text-display.markdown table td{padding:8px 12px;border-bottom:1px solid var(--outline);}
.text-display.markdown table tbody tr:last-child td{border-bottom:none;}
.text-display.markdown table tbody tr:hover{background:rgba(79,174,74,0.05);}
.text-display.markdown blockquote{margin:12px 0;padding:8px 16px;border-left:4px solid var(--accent);background:rgba(79,174,74,0.1);color:var(--text);font-style:italic;}
.text-display.markdown a{color:var(--accent);text-decoration:none;}
.text-display.markdown a:hover{text-decoration:underline;}
.text-display.markdown img{max-width:100%;height:auto;border-radius:6px;margin:8px 0;}
.text-display.markdown hr{border:none;border-top:1px solid var(--outline);margin:16px 0;}
.text-display.markdown del{text-decoration:line-through;opacity:0.7;}
.text-display.markdown strong{font-weight:600;color:var(--text);}
.text-display.markdown em{font-style:italic;}
.text-display.markdown p{margin:12px 0;line-height:1.6;}

/* Installer Wizard Modal */
.installer-wizard-modal{position:fixed;inset:0;z-index:100;display:flex;align-items:center;justify-content:center;}
.installer-modal{width:90%;max-width:600px;max-height:80vh;}
.installer-step{margin:16px 0;}
.installer-step h4{margin:0 0 8px;color:var(--text);font-size:16px;}
.installer-step p{margin:0 0 16px;color:var(--muted);line-height:1.5;}
.form-group{margin:16px 0;}
.form-group label{display:block;margin-bottom:6px;color:var(--text);font-size:14px;}
.form-group input[type="text"], .form-group textarea{width:100%;padding:8px 12px;background:var(--card);border:1px solid var(--outline);border-radius:6px;color:var(--text);font-size:14px;font-family:inherit;}
.form-group input[type="text"]:focus, .form-group textarea:focus{outline:none;border-color:var(--accent);}
.form-group input[type="checkbox"]{margin-right:8px;}
.form-group label:has(input[type="checkbox"]){display:flex;align-items:center;margin-bottom:8px;}
.selected-path{margin-top:12px;padding:8px 12px;background:var(--card);border:1px solid var(--outline);border-radius:6px;color:var(--accent);font-family:ui-monospace,monospace;font-size:13px;word-break:break-all;}
.modal-footer{display:flex;gap:8px;justify-content:flex-end;padding:12px 16px;border-top:1px solid var(--outline);background:var(--card);}
.summary-item{margin:12px 0;padding:8px 12px;background:var(--card);border-radius:6px;}
.summary-item strong{color:var(--text);}
.directory-list{margin:8px 0 0 16px;color:var(--text);}
.directory-list li{margin:4px 0;font-family:ui-monospace,monospace;font-size:13px;}
.progress-bar{width:100%;height:8px;background:var(--card);border-radius:4px;overflow:hidden;margin:12px 0;}
.progress-fill{height:100%;background:var(--accent);transition:width 0.3s ease;border-radius:4px;}
.install-progress{margin:16px 0;}
#progress-text{text-align:center;color:var(--muted);margin-top:8px;font-size:14px;}
.install-success{background:rgba(79,174,74,0.1);border:1px solid var(--accent);color:var(--accent);padding:16px;border-radius:8px;}
.install-success h4{margin:0 0 8px;color:var(--accent);}
.install-success p{margin:8px 0;line-height:1.5;}
.install-success code{background:var(--card);color:var(--text);}
.install-error{background:rgba(239,68,68,0.1);border:1px solid var(--danger);color:var(--danger);padding:16px;border-radius:8px;}
.install-error h4{margin:0 0 8px;color:var(--danger);}

/* Specs Management Modal (legacy styles removed - now using Tailwind) */

/* Specs Management Page (full-screen page within app) */
.specs-page-root {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg);
  color: var(--text);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans;
}

/* Specs Management Content (within content area) */
.specs-page-content {
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans;
}

/* Toolbar for content area */
.specs-page-content .specs-toolbar {
  padding: 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--outline);
  flex-shrink: 0;
  width: 100%;
}

/* Layout for content area with resizable splitter */
.specs-page-content .specs-layout{display:flex;flex:1;overflow:hidden;position:relative;width:100%;}
.specs-page-content .specs-table-container{width:100%;display:flex;flex-direction:column;overflow:hidden;background:var(--panel);transition:width 0.1s ease;border-right:1px solid var(--outline);}
.specs-page-content .specs-splitter{width:4px;background:var(--outline);cursor:col-resize;user-select:none;position:relative;flex-shrink:0;transition:background 0.2s ease;}
.specs-page-content .specs-splitter:hover{background:var(--accent);}
.specs-page-content .specs-details-panel{width:40%;background:var(--card);overflow-y:auto;padding:16px;transition:width 0.1s ease;}

/* Table styles for content area */
.specs-page-content .specs-table{width:100%;border-collapse:collapse;font-size:14px;background:var(--panel);}
.specs-page-content .specs-table th{background:var(--card);color:var(--text);padding:14px 12px;text-align:left;border-bottom:2px solid var(--outline);font-weight:600;position:sticky;top:0;z-index:1;}
.specs-page-content .specs-table th.sortable{cursor:pointer;user-select:none;}
.specs-page-content .specs-table th.sortable:hover{background:rgba(79, 174, 74, 0.1);}
.specs-page-content .specs-table th.sort-asc::after{content:' ↑';color:var(--accent);}
.specs-page-content .specs-table th.sort-desc::after{content:' ↓';color:var(--accent);}
.specs-page-content .specs-table td{padding:14px 12px;border-bottom:1px solid var(--outline);vertical-align:middle;}
.specs-page-content .specs-table tr:hover{background:var(--card);}
.specs-page-content .specs-table tr.selected{background:rgba(79, 174, 74, 0.15);border-left:3px solid var(--accent);}

/* Page Header */
.specs-page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--outline);
  flex-shrink: 0;
  width: 100%;
}

.back-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--card);
  border: 1px solid var(--outline);
  border-radius: 8px;
  color: var(--text);
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s ease;
}

.back-button:hover {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
}

.back-icon {
  font-size: 16px;
  font-weight: bold;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  margin: 0;
  color: var(--text);
}

.page-actions {
  display: flex;
  gap: 12px;
}

.btn-primary {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.btn-primary:hover {
  background: #45a040;
  transform: translateY(-1px);
}

/* Enhanced toolbar for page */
.specs-page-root .specs-toolbar {
  padding: 16px 24px;
  background: var(--panel);
  border-bottom: 1px solid var(--outline);
  flex-shrink: 0;
}

.specs-toolbar{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--outline);margin-bottom:12px;}
.toolbar-search{flex:1;max-width:300px;}
.toolbar-search input{width:100%;padding:8px 12px;background:var(--card);border:1px solid var(--outline);border-radius:6px;color:var(--text);font-size:14px;}
.toolbar-search input:focus{outline:none;border-color:var(--accent);}
.toolbar-filters{display:flex;gap:8px;}
.toolbar-filters select{padding:8px 12px;background:var(--card);border:1px solid var(--outline);border-radius:6px;color:var(--text);font-size:14px;}

/* Enhanced layout for page with resizable splitter */
.specs-page-root .specs-layout{display:flex;flex:1;overflow:hidden;position:relative;}
.specs-page-root .specs-table-container{width:100%;display:flex;flex-direction:column;overflow:hidden;background:var(--panel);transition:width 0.1s ease;border-right:1px solid var(--outline);}
.specs-page-root .specs-splitter{width:4px;background:var(--outline);cursor:col-resize;user-select:none;position:relative;flex-shrink:0;transition:background 0.2s ease;}
.specs-page-root .specs-splitter:hover{background:var(--accent);}
.specs-page-root .specs-details-panel{width:40%;background:var(--card);overflow-y:auto;padding:24px;transition:width 0.1s ease;}

/* Enhanced table for page */
.specs-page-root .specs-table{width:100%;border-collapse:collapse;font-size:14px;background:var(--panel);}
.specs-page-root .specs-table th{background:var(--card);color:var(--text);padding:14px 12px;text-align:left;border-bottom:2px solid var(--outline);font-weight:600;position:sticky;top:0;z-index:1;}
.specs-page-root .specs-table th.sortable{cursor:pointer;user-select:none;}
.specs-page-root .specs-table th.sortable:hover{background:rgba(79, 174, 74, 0.1);}
.specs-page-root .specs-table th.sort-asc::after{content:' ↑';color:var(--accent);}
.specs-page-root .specs-table th.sort-desc::after{content:' ↓';color:var(--accent);}
.specs-page-root .specs-table td{padding:14px 12px;border-bottom:1px solid var(--outline);vertical-align:middle;}
.specs-page-root .specs-table tr:hover{background:var(--card);}
.specs-page-root .specs-table tr.selected{background:rgba(79, 174, 74, 0.15);border-left:3px solid var(--accent);}

/* Legacy modal layout (keeping existing grid) */
.specs-management-modal .specs-layout{display:grid;grid-template-columns:1fr 1fr;gap:16px;flex:1;overflow:hidden;}
/* Legacy table styles removed - now using Tailwind */

.specs-details-panel{border:1px solid var(--outline);border-radius:8px;background:var(--card);overflow:auto;}
.details-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--muted);}
.placeholder-icon{font-size:48px;margin-bottom:16px;opacity:0.5;}
.placeholder-text{font-size:16px;font-style:italic;}

.status-icon{font-size:16px;display:inline-block;width:20px;text-align:center;}
.progress-text{font-family:ui-monospace,monospace;font-size:12px;color:var(--muted);}
.effort-badge{display:inline-block;padding:2px 6px;border-radius:4px;font-size:11px;font-weight:500;background:var(--panel);border:1px solid var(--outline);}
.date-text{font-family:ui-monospace,monospace;font-size:12px;color:var(--muted);}

/* Enhanced Spec Details Panel */
.spec-details-content{padding:16px;height:100%;overflow-y:auto;}

.spec-details-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid var(--outline);}
.spec-details-title{margin:0;font-size:18px;color:var(--text);font-weight:600;}
.spec-status-badge{display:flex;align-items:center;gap:6px;padding:6px 12px;border-radius:6px;font-size:12px;font-weight:500;}
.spec-status-badge.completed{background:rgba(79,174,74,0.15);color:var(--accent);border:1px solid var(--accent);}
.spec-status-badge.in_progress{background:rgba(245,158,11,0.15);color:var(--warning);border:1px solid var(--warning);}
.spec-status-badge.pending{background:rgba(163,163,170,0.15);color:var(--muted);border:1px solid var(--muted);}

.section-title{font-size:14px;font-weight:600;color:var(--text);margin:0 0 12px 0;display:flex;align-items:center;}
.section-title::before{content:'';width:3px;height:16px;background:var(--accent);margin-right:8px;border-radius:2px;}

.spec-overview-section{margin-bottom:24px;}
.spec-metadata{display:grid;gap:8px;}
.metadata-item{display:flex;align-items:center;padding:8px 12px;background:var(--panel);border-radius:6px;}
.metadata-label{font-size:13px;color:var(--muted);min-width:80px;font-weight:500;}
.metadata-value{font-size:13px;color:var(--text);margin-left:auto;}
.metadata-value.spec-path{font-family:ui-monospace,monospace;font-size:11px;color:var(--muted);word-break:break-all;}

.spec-progress-section{margin-bottom:24px;}
.progress-metrics{display:grid;gap:16px;}
.progress-metric{background:var(--panel);padding:12px;border-radius:8px;}
.progress-metric-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
.progress-metric-label{font-size:13px;color:var(--muted);font-weight:500;}
.progress-metric-value{font-size:13px;color:var(--text);font-family:ui-monospace,monospace;}
.progress-bar{width:100%;height:6px;background:var(--card);border-radius:3px;overflow:hidden;margin-bottom:4px;}
.progress-fill{height:100%;background:var(--accent);transition:width 0.3s ease;border-radius:3px;}
.progress-fill.effort-fill{background:var(--warning);}
.progress-percentage{font-size:11px;color:var(--muted);text-align:right;font-family:ui-monospace,monospace;}

.spec-tasks-section{margin-bottom:16px;}
.task-status-groups{display:grid;gap:16px;}
.task-status-group{background:var(--panel);border-radius:8px;overflow:hidden;}
.task-group-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--card);border-bottom:1px solid var(--outline);}
.task-group-title{font-size:14px;font-weight:600;color:var(--text);}
.task-group-count{font-size:12px;color:var(--muted);background:var(--panel);padding:2px 6px;border-radius:4px;}

.task-list{padding:8px;}
.task-item{margin-bottom:8px;padding:10px;background:var(--card);border-radius:6px;border-left:3px solid transparent;}
.task-item.completed{border-left-color:var(--accent);}
.task-item.in_progress{border-left-color:var(--warning);}
.task-item.pending{border-left-color:var(--muted);}
.task-item:last-child{margin-bottom:0;}

.task-item-header{display:flex;align-items:center;gap:8px;margin-bottom:6px;}
.task-status-icon{font-size:14px;width:16px;text-align:center;cursor:help;}
.task-name{font-size:13px;font-weight:500;color:var(--text);flex:1;}
.task-effort{font-size:10px;padding:2px 4px;}
.task-id-container{display:flex;align-items:center;gap:4px;margin-left:auto;}
.task-id{font-size:11px;color:var(--muted);font-family:ui-monospace,monospace;}
.copy-task-id-btn{background:transparent;border:1px solid var(--outline);color:var(--muted);width:20px;height:20px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all 0.2s ease;}
.copy-task-id-btn:hover{background:var(--card);color:var(--text);border-color:var(--accent);}
.copy-task-id-btn:active{transform:scale(0.95);}

/* Task Progress Indicator Component */
.task-progress-indicator{margin-bottom:16px;padding:12px;background:var(--card);border-radius:8px;border:1px solid var(--border);}
.progress-indicator-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
.indicator-title{font-size:13px;font-weight:600;color:var(--text);}
.indicator-summary{font-size:12px;color:var(--muted);font-weight:500;}

.progress-indicator-bar{display:flex;height:24px;background:var(--bg);border-radius:12px;overflow:hidden;margin-bottom:12px;box-shadow:inset 0 1px 3px rgba(0,0,0,0.1);}
.progress-segment{display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;position:relative;min-width:2px;}
.progress-segment:hover{filter:brightness(1.1);cursor:pointer;}
.progress-segment.completed{background:var(--accent);background:linear-gradient(135deg,var(--accent),#3da73a);}
.progress-segment.in-progress{background:var(--warning);background:linear-gradient(135deg,#f59e0b,#d97706);}
.progress-segment.pending{background:var(--muted);background:linear-gradient(135deg,#9ca3af,#6b7280);}
.progress-segment.blocked{background:var(--error);background:linear-gradient(135deg,var(--error),#dc2626);}

.progress-indicator-legend{display:flex;gap:16px;flex-wrap:wrap;}
.legend-item{display:flex;align-items:center;gap:6px;font-size:12px;}
.legend-icon{font-size:14px;width:16px;text-align:center;}
.legend-label{color:var(--text);font-weight:500;}
.legend-count{color:var(--muted);font-weight:600;background:var(--bg);padding:2px 6px;border-radius:10px;min-width:20px;text-align:center;}

.task-description{font-size:12px;color:var(--muted);line-height:1.4;margin-bottom:6px;}

.task-dependencies{font-size:11px;color:var(--muted);margin-bottom:4px;}
.dependencies-label{color:var(--muted);margin-right:4px;}
.dependencies-list{font-family:ui-monospace,monospace;color:var(--text);}

.task-completed-date{font-size:11px;color:var(--accent);font-family:ui-monospace,monospace;}

/* Quick Actions Bar */
.quick-actions-bar {
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid var(--outline);
}

.quick-actions-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
  margin-top: 12px;
}

.quick-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px 8px;
  background: var(--panel);
  border: 1px solid var(--outline);
  border-radius: 8px;
  cursor: pointer;
  transition: all 200ms ease-in-out;
  min-height: 80px;
  font-size: 13px;
  color: var(--text);
}

.quick-action-btn:hover {
  background: var(--card);
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.quick-action-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.quick-action-btn .action-icon {
  font-size: 24px;
  margin-bottom: 8px;
  display: block;
}

.quick-action-btn .action-label {
  font-weight: 500;
  text-align: center;
}

.quick-action-btn.open-sdd .action-icon {
  color: var(--accent);
}

.quick-action-btn.mark-done .action-icon {
  color: var(--success);
}

.quick-action-btn.create-spec .action-icon {
  color: var(--warning);
}

.quick-action-btn.run-analysis .action-icon {
  color: #3B82F6;
}

.quick-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.quick-action-btn:disabled:hover {
  transform: none;
  box-shadow: none;
  background: var(--panel);
  border-color: var(--outline);
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .specs-layout{grid-template-columns:1fr;grid-template-rows:1fr 1fr;}
  .specs-management-content{width:98%;height:90vh;}
}